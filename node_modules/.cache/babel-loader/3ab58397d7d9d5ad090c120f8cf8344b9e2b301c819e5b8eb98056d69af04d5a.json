{"ast":null,"code":"import React,{useRef,useState,useEffect}from'react';import Draggable from'./Draggable';import Droppable from'./Droppable';import config from'./../data/config';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const CardDiscard=_ref=>{let{position,onDragStart,onCancel,cardMoving,categoryMoving,mousePosition,onCardDropInsideDropZone,onCategoryDropInsideDropZone,discardedCardsList,zIndexOrder}=_ref;const discardRef=useRef();const thisSize=config.discard.size;const dropZoneRef=useRef();const dropZoneSize={x:110,y:80};const[isDropZoneActive,setIsDropZoneActive]=useState(false);const handleCardEnter=()=>{console.log(\"Card entered discard dropZone, card : \".concat(cardMoving,\", category : \").concat(categoryMoving));if(cardMoving||categoryMoving)setIsDropZoneActive(true);};const handleCardLeave=()=>{console.log(\"Card left discard dropZone!\");if(cardMoving||categoryMoving)setIsDropZoneActive(false);};useEffect(()=>{if(isDropZoneActive){onCardDropInsideDropZone(\"Discard\");setIsDropZoneActive(false);}},[cardMoving]);useEffect(()=>{if(isDropZoneActive){onCategoryDropInsideDropZone(\"Discard\");setIsDropZoneActive(false);}},[categoryMoving]);const handleCancel=()=>{const rect=discardRef.current.getBoundingClientRect();const discardPosition={x:rect.left+rect.width/2,y:rect.top};onCancel(discardPosition);};return/*#__PURE__*/_jsx(Draggable,{initialPosition:position,size:thisSize,onDragStart:onDragStart,zIndexOrder:zIndexOrder,children:/*#__PURE__*/_jsxs(\"div\",{className:\"column-content discard-container\",ref:discardRef,style:{position:'absolute',width:thisSize.x,height:thisSize.y,left:position.x+'px',top:position.y+'px'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"game-element-title\",children:config.discard.title}),/*#__PURE__*/_jsx(Droppable,{cardMoving:cardMoving,categoryMoving:categoryMoving,mousePosition:mousePosition,onCardEnter:handleCardEnter,onCardLeave:handleCardLeave,children:/*#__PURE__*/_jsx(\"div\",{className:\"discard-drop-zone\",style:{width:dropZoneSize.x,height:dropZoneSize.y,backgroundColor:!isDropZoneActive?'black':'darkgray'}})}),discardedCardsList.length>-1&&/*#__PURE__*/_jsx(\"div\",{className:\"button button-xsmall \"+(discardedCardsList.length===0&&'button-disabled'),onClick:handleCancel,children:config.discard.buttonText})]})});};export default CardDiscard;","map":{"version":3,"names":["React","useRef","useState","useEffect","Draggable","Droppable","config","jsx","_jsx","jsxs","_jsxs","CardDiscard","_ref","position","onDragStart","onCancel","cardMoving","categoryMoving","mousePosition","onCardDropInsideDropZone","onCategoryDropInsideDropZone","discardedCardsList","zIndexOrder","discardRef","thisSize","discard","size","dropZoneRef","dropZoneSize","x","y","isDropZoneActive","setIsDropZoneActive","handleCardEnter","console","log","concat","handleCardLeave","handleCancel","rect","current","getBoundingClientRect","discardPosition","left","width","top","initialPosition","children","className","ref","style","height","title","onCardEnter","onCardLeave","backgroundColor","length","onClick","buttonText"],"sources":["/Users/todmopel/TheHangar/lesCentMétiers/tri-cartes/src/components/CardDiscard.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport Draggable from './Draggable';\nimport Droppable from './Droppable';\n\nimport config from './../data/config';\n\nconst CardDiscard = ({ position, onDragStart, onCancel, cardMoving, categoryMoving, mousePosition, onCardDropInsideDropZone, onCategoryDropInsideDropZone, discardedCardsList, zIndexOrder}) => {\n    const discardRef = useRef();\n    const thisSize = config.discard.size;\n    const dropZoneRef = useRef();\n    const dropZoneSize = { x: 110, y: 80 };\n\n    const [isDropZoneActive, setIsDropZoneActive] = useState(false);\n\n    const handleCardEnter = () => {\n        console.log(`Card entered discard dropZone, card : ${cardMoving}, category : ${categoryMoving}`);\n        if (cardMoving || categoryMoving)\n            setIsDropZoneActive(true);\n    };\n\n    const handleCardLeave = () => {\n        console.log(`Card left discard dropZone!`);\n        if (cardMoving || categoryMoving)\n            setIsDropZoneActive(false);\n    };\n\n    useEffect(() => {\n        if (isDropZoneActive) {\n            onCardDropInsideDropZone(\"Discard\");\n            setIsDropZoneActive(false);\n        }\n    }, [cardMoving]);\n    useEffect(() => {\n        if (isDropZoneActive) {\n            onCategoryDropInsideDropZone(\"Discard\");\n            setIsDropZoneActive(false);\n        }\n    }, [categoryMoving]);\n\n    const handleCancel = () => {\n        const rect = discardRef.current.getBoundingClientRect();\n        const discardPosition = {\n            x: rect.left + rect.width / 2,\n            y: rect.top,\n        };\n        onCancel(discardPosition);\n    };\n\n    return (\n        <Draggable\n            initialPosition={position}\n            size={thisSize}\n            onDragStart={onDragStart}\n            zIndexOrder={zIndexOrder}\n        >\n            <div\n                className=\"column-content discard-container\"\n                ref={discardRef}\n                style={{\n                    position: 'absolute',\n                    width: thisSize.x,\n                    height: thisSize.y,\n                    left: position.x + 'px',\n                    top: position.y + 'px',\n                }}\n            >\n\n                <div\n                    className=\"game-element-title\"\n                >\n                    {config.discard.title}\n                </div>\n                <Droppable\n                    cardMoving={cardMoving}\n                    categoryMoving={categoryMoving}\n                    mousePosition={mousePosition}\n                    onCardEnter={handleCardEnter}\n                    onCardLeave={handleCardLeave}\n                >\n                    <div\n                        className=\"discard-drop-zone\"\n                        style={{\n                            width: dropZoneSize.x,\n                            height: dropZoneSize.y,\n                            backgroundColor: !isDropZoneActive ? 'black' : 'darkgray',\n                        }}\n                    >\n                    </div>\n                </Droppable>\n\n                {\n                    discardedCardsList.length > -1 && (\n                        <div\n                            className={\"button button-xsmall \" + (discardedCardsList.length === 0 && 'button-disabled')}\n                            onClick={handleCancel}\n                        >\n                            {config.discard.buttonText}\n                        </div>\n                    )\n                }\n            </div>\n        </Draggable>\n    );\n};\n\nexport default CardDiscard;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}