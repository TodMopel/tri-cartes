{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import axios from'axios';import Papa from'papaparse';import'./../App.css';import config from'./../data/config';import Draggable from'../components/Draggable';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const HomePage=_ref=>{let{onGoogleSheetSubmit}=_ref;const[googleSheetURL,setGoogleSheetURL]=useState('https://docs.google.com/spreadsheets/d/e/2PACX-1vShvPU2v2t8mBqaitqTAFpNlcNPkdIxWnBlrSVguu0z_GbY_vHCyNWPuSfG2XhomHE4muU9UhBNKy3O/pub?output=csv');const[extractionCount,setExtractionCount]=useState(null);const[errorMessages,setErrorMessages]=useState([]);const handleURLChange=event=>{setGoogleSheetURL(event.target.value);};useEffect(()=>{fetchGoogleSheetData();},[]);const fetchGoogleSheetData=async()=>{try{const response=await axios.get(googleSheetURL);const csvData=response.data;Papa.parse(csvData,{header:true,dynamicTyping:true,complete:result=>{const activeJobs=result.data.filter(row=>row.ACTIF===true);const formattedData=activeJobs.map(row=>({text:row.MÉTIER,description:row.DESCRIPTION}));setExtractionCount(activeJobs.length);setErrorMessages([]);onGoogleSheetSubmit(formattedData);},error:error=>{console.error('Erreur lors de l\\'analyse CSV :',error);setExtractionCount(null);setErrorMessages([error.message]);}});}catch(error){console.error('Erreur lors de la récupération des données du Google Sheet :',error);setExtractionCount(null);setErrorMessages([\"Erreur lors de la r\\xE9cup\\xE9ration des donn\\xE9es du Google Sheet:\\n \".concat(error)]);}};const handleSubmit=()=>{fetchGoogleSheetData();};return/*#__PURE__*/_jsxs(\"div\",{className:\"background-grid home-page center-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"center-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:config.home.title}),/*#__PURE__*/_jsx(\"h3\",{children:config.home.subTitle}),/*#__PURE__*/_jsx(\"div\",{className:\"ui-card ui-button-container\",children:/*#__PURE__*/_jsx(Link,{to:\"/game\",className:\"button button-normal\",children:config.home.buttonStart})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"option-menu ui-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\".concat(config.home.titleUpdateList)}),/*#__PURE__*/_jsx(\"div\",{children:\"(\".concat(config.home.subTitleUpdateList,\")\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"row-content\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input-field\",type:\"text\",value:googleSheetURL,onChange:handleURLChange,placeholder:\"Enter Google Sheet URL\"}),/*#__PURE__*/_jsx(\"div\",{onClick:handleSubmit,className:\"button button-small\",children:config.home.buttonUpdateList})]})]}),extractionCount!==null&&/*#__PURE__*/_jsx(\"div\",{className:\"ui-card info-box success\",children:\"\".concat(config.home.infoUpdateList,\" : \").concat(extractionCount)}),errorMessages.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"ui-card info-box error\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"error-list\",children:errorMessages.map((errorMessage,index)=>/*#__PURE__*/_jsx(\"li\",{children:errorMessage},index))})})]});};export default HomePage;","map":{"version":3,"names":["React","useState","useEffect","Link","axios","Papa","config","Draggable","jsx","_jsx","jsxs","_jsxs","HomePage","_ref","onGoogleSheetSubmit","googleSheetURL","setGoogleSheetURL","extractionCount","setExtractionCount","errorMessages","setErrorMessages","handleURLChange","event","target","value","fetchGoogleSheetData","response","get","csvData","data","parse","header","dynamicTyping","complete","result","activeJobs","filter","row","ACTIF","formattedData","map","text","MÉTIER","description","DESCRIPTION","length","error","console","message","concat","handleSubmit","className","children","home","title","subTitle","to","buttonStart","titleUpdateList","subTitleUpdateList","type","onChange","placeholder","onClick","buttonUpdateList","infoUpdateList","errorMessage","index"],"sources":["/Users/todmopel/TheHangar/test deploy/tri-cartes/src/pages/HomePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport Papa from 'papaparse';\nimport './../App.css';\n\nimport config from './../data/config';\nimport Draggable from '../components/Draggable';\n\nconst HomePage = ({ onGoogleSheetSubmit }) => {\n    const [googleSheetURL, setGoogleSheetURL] = useState('https://docs.google.com/spreadsheets/d/e/2PACX-1vShvPU2v2t8mBqaitqTAFpNlcNPkdIxWnBlrSVguu0z_GbY_vHCyNWPuSfG2XhomHE4muU9UhBNKy3O/pub?output=csv');\n    const [extractionCount, setExtractionCount] = useState(null);\n    const [errorMessages, setErrorMessages] = useState([]);\n\n    const handleURLChange = (event) => {\n        setGoogleSheetURL(event.target.value);\n    };\n\n    useEffect(() => {\n        fetchGoogleSheetData();\n    }, []);\n\n    const fetchGoogleSheetData = async () => {\n        try {\n            const response = await axios.get(googleSheetURL);\n            const csvData = response.data;\n\n            Papa.parse(csvData, {\n                header: true,\n                dynamicTyping: true,\n                complete: (result) => {\n                    const activeJobs = result.data.filter((row) => row.ACTIF === true);\n\n                    const formattedData = activeJobs.map((row) => ({\n                        text: row.MÉTIER,\n                        description: row.DESCRIPTION,\n                    }));\n\n                    setExtractionCount(activeJobs.length);\n                    setErrorMessages([]);\n                    onGoogleSheetSubmit(formattedData);\n                },\n                error: (error) => {\n                    console.error('Erreur lors de l\\'analyse CSV :', error);\n                    setExtractionCount(null);\n                    setErrorMessages([error.message]);\n                },\n            });\n        } catch (error) {\n            console.error('Erreur lors de la récupération des données du Google Sheet :', error);\n            setExtractionCount(null);\n            setErrorMessages([`Erreur lors de la récupération des données du Google Sheet:\\n ${error}`]);\n        }\n    };\n\n    const handleSubmit = () => {\n        fetchGoogleSheetData();\n    };\n\n    return (\n        <div className=\"background-grid home-page center-content\">\n            <div className=\"center-content\">\n                <h1>{config.home.title}</h1>\n                <h3>{config.home.subTitle}</h3>\n                <div className=\"ui-card ui-button-container\">\n                    <Link to=\"/game\" className=\"button button-normal\">\n                        {config.home.buttonStart}\n                    </Link>\n                </div>\n            </div>\n            <div className=\"option-menu ui-card\">\n                <h2>{`${config.home.titleUpdateList}`}</h2>\n                <div>{`(${config.home.subTitleUpdateList})`}</div>\n                <div className=\"row-content\">\n                    <input\n                        className=\"input-field\"\n                        type=\"text\"\n                        value={googleSheetURL}\n                        onChange={handleURLChange}\n                        placeholder=\"Enter Google Sheet URL\"\n                    />\n                    <div onClick={handleSubmit} className=\"button button-small\">\n                        {config.home.buttonUpdateList}\n                    </div>\n                </div>\n            </div>\n            {extractionCount !== null && (\n                <div className={`ui-card info-box success`}>\n                    {`${config.home.infoUpdateList} : ${extractionCount}`}\n                </div>\n            )}\n            {errorMessages.length > 0 && (\n                <div className={`ui-card info-box error`}>\n                    <ul className=\"error-list\">\n                        {errorMessages.map((errorMessage, index) => (\n                            <li key={index}>{errorMessage}</li>\n                        ))}\n                    </ul>\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default HomePage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}