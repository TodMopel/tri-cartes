{"ast":null,"code":"import React,{useRef,useState,useEffect}from'react';import Draggable from'./Draggable';import Droppable from'./Droppable';import editLineIcon from'./../images/edit_line.png';import config from'./../data/config';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Category=_ref=>{let{categoryIndex,position,text,updateCategoryText,onDragStart,onDragEnd,cardMoving,mousePosition,onCardDropInsideDropZone,categoryCardList,onCardRestored,zIndexOrder}=_ref;const categoryRef=useRef();const[thisSize,setThisSize]=useState(config.category.size);const[thisColor,setThisColor]=useState();const dropZoneRef=useRef();const dropZoneSize=config.card.size;const categoryNameRef=useRef();const[categoryNameHeight,setCategoryNameHeight]=useState(18);const[isDropZoneActive,setIsDropZoneActive]=useState(false);const[isRenaming,setIsRenaming]=useState(false);const[categoryName,setCategoryName]=useState(text);const handleCardEnter=()=>{setIsDropZoneActive(true);};const handleCardLeave=()=>{setIsDropZoneActive(false);};useEffect(()=>{setThisColor(getRandomColor());},[]);useEffect(()=>{if(isDropZoneActive){onCardDropInsideDropZone(text);setIsDropZoneActive(false);}},[cardMoving]);useEffect(()=>{setThisSize(prevSize=>({...prevSize,y:100+categoryCardList.length*30+categoryNameHeight}));},[categoryCardList]);const handleRenameClick=()=>{setIsRenaming(true);};const handleRenameChange=e=>{setCategoryName(e.target.value);};const handleRenameBlur=()=>{setCategoryName(prevName=>categoryName);setIsRenaming(false);setTimeout(()=>{const inputHeight=categoryNameRef.current.getBoundingClientRect().height;setCategoryNameHeight(inputHeight);setThisSize(prevSize=>({...prevSize,y:100+categoryCardList.length*30+inputHeight}));updateCategoryText(categoryName);},0);};const handleRenameKeyDown=e=>{if(e.key==='Enter'){handleRenameBlur();}};const handleCategoryCardClick=(categoryIndex,index)=>{const rect=categoryRef.current.getBoundingClientRect();const position={x:rect.left+rect.width/2,y:rect.top};onCardRestored(position,categoryIndex,index);setThisSize(prevSize=>({...prevSize,y:100+categoryCardList.length*30+categoryNameHeight}));};const getRandomColor=()=>{const randomIndex=Math.floor(Math.random()*config.category.categoryColors.length);return config.category.categoryColors[randomIndex];};const getCategoryName=()=>{return categoryName;};return/*#__PURE__*/_jsx(Draggable,{initialPosition:position,size:thisSize,onDragStart:onDragStart,onDragEnd:onDragEnd,zIndexOrder:zIndexOrder,children:/*#__PURE__*/_jsxs(\"div\",{ref:categoryRef,className:\"category-container\",style:{position:'absolute',width:thisSize.x,height:thisSize.y,left:position.x+'px',top:position.y+'px',backgroundColor:thisColor},children:[/*#__PURE__*/_jsx(\"div\",{ref:categoryNameRef,children:isRenaming?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:categoryName,onChange:handleRenameChange,onBlur:handleRenameBlur,onKeyDown:handleRenameKeyDown,autoFocus:true,className:\"category-title\",style:{border:'0',backgroundColor:'transparent',width:dropZoneSize.x}}):/*#__PURE__*/_jsxs(\"div\",{className:\"row-content category-title\",children:[/*#__PURE__*/_jsx(\"div\",{children:categoryName}),/*#__PURE__*/_jsx(\"img\",{src:editLineIcon,alt:\"Renommer\",className:\"rename-icon\",onClick:handleRenameClick})]})}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',justifyContent:'center',alignItems:'center'},children:categoryCardList.map((card,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"card-container card-categorized-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card card-txt card-categorized\",onClick:()=>handleCategoryCardClick(categoryIndex,index),children:card.text})},index))}),/*#__PURE__*/_jsx(Droppable,{cardMoving:cardMoving,mousePosition:mousePosition,onCardEnter:handleCardEnter,onCardLeave:handleCardLeave,children:/*#__PURE__*/_jsx(\"div\",{ref:dropZoneRef,className:\"drop-zone-default\",style:{width:dropZoneSize.x,height:dropZoneSize.y,backgroundColor:!isDropZoneActive?'#FFCA0080':'transparent'}})})]})});};export default Category;","map":{"version":3,"names":["React","useRef","useState","useEffect","Draggable","Droppable","editLineIcon","config","jsx","_jsx","jsxs","_jsxs","Category","_ref","categoryIndex","position","text","updateCategoryText","onDragStart","onDragEnd","cardMoving","mousePosition","onCardDropInsideDropZone","categoryCardList","onCardRestored","zIndexOrder","categoryRef","thisSize","setThisSize","category","size","thisColor","setThisColor","dropZoneRef","dropZoneSize","card","categoryNameRef","categoryNameHeight","setCategoryNameHeight","isDropZoneActive","setIsDropZoneActive","isRenaming","setIsRenaming","categoryName","setCategoryName","handleCardEnter","handleCardLeave","getRandomColor","prevSize","y","length","handleRenameClick","handleRenameChange","e","target","value","handleRenameBlur","prevName","setTimeout","inputHeight","current","getBoundingClientRect","height","handleRenameKeyDown","key","handleCategoryCardClick","index","rect","x","left","width","top","randomIndex","Math","floor","random","categoryColors","getCategoryName","initialPosition","children","ref","className","style","backgroundColor","type","onChange","onBlur","onKeyDown","autoFocus","border","src","alt","onClick","display","flexDirection","justifyContent","alignItems","map","onCardEnter","onCardLeave"],"sources":["/Users/todmopel/TheHangar/test deploy/tri-cartes/src/components/Category.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport Draggable from './Draggable';\nimport Droppable from './Droppable';\n\nimport editLineIcon from './../images/edit_line.png';\nimport config from './../data/config';\n\nconst Category = ({ categoryIndex, position, text, updateCategoryText, onDragStart, onDragEnd, cardMoving, mousePosition, onCardDropInsideDropZone, categoryCardList, onCardRestored, zIndexOrder }) => {\n    const categoryRef = useRef();\n    const [thisSize, setThisSize] = useState(config.category.size);\n    const [thisColor, setThisColor] = useState();\n    const dropZoneRef = useRef();\n    const dropZoneSize = config.card.size;\n\n    const categoryNameRef = useRef();\n    const [categoryNameHeight, setCategoryNameHeight] = useState(18);\n\n    const [isDropZoneActive, setIsDropZoneActive] = useState(false);\n    const [isRenaming, setIsRenaming] = useState(false);\n\n    const [categoryName, setCategoryName] = useState(text);\n\n    const handleCardEnter = () => {\n        setIsDropZoneActive(true);\n    };\n\n    const handleCardLeave = () => {\n        setIsDropZoneActive(false);\n    };\n    useEffect(() => {\n        setThisColor(getRandomColor());\n    }, []);\n\n    useEffect(() => {\n        if (isDropZoneActive) {\n            onCardDropInsideDropZone(text);\n            setIsDropZoneActive(false);\n        }\n    }, [cardMoving]);\n\n    useEffect(() => {\n        setThisSize((prevSize) => ({ ...prevSize, y: 100 + categoryCardList.length * 30 + categoryNameHeight }));\n    }, [categoryCardList]);\n\n    const handleRenameClick = () => {\n        setIsRenaming(true);\n    };\n\n    const handleRenameChange = (e) => {\n        setCategoryName(e.target.value);\n    };\n\n    const handleRenameBlur = () => {\n        setCategoryName((prevName) => categoryName);\n        setIsRenaming(false);\n\n        setTimeout(() => {\n            const inputHeight = categoryNameRef.current.getBoundingClientRect().height;\n            setCategoryNameHeight(inputHeight);\n            setThisSize((prevSize) => ({ ...prevSize, y: 100 + categoryCardList.length * 30 + inputHeight }));\n            updateCategoryText(categoryName);\n        }, 0);\n    };\n\n    const handleRenameKeyDown = (e) => {\n        if (e.key === 'Enter') {\n            handleRenameBlur();\n        }\n    };\n\n    const handleCategoryCardClick = (categoryIndex, index) => {\n        const rect = categoryRef.current.getBoundingClientRect();\n        const position = {\n            x: rect.left + rect.width / 2,\n            y: rect.top,\n        };\n\n        onCardRestored(position, categoryIndex, index);\n        setThisSize((prevSize) => ({ ...prevSize, y: 100 + categoryCardList.length * 30 + categoryNameHeight }));\n    }\n\n    const getRandomColor = () => {\n        const randomIndex = Math.floor(Math.random() * config.category.categoryColors.length);\n        return config.category.categoryColors[randomIndex];\n    };\n\n    const getCategoryName = () => {\n        return categoryName;\n    }\n\n    return (\n        <Draggable\n            initialPosition={position}\n            size={thisSize}\n            onDragStart={onDragStart}\n            onDragEnd={onDragEnd}\n            zIndexOrder={zIndexOrder}\n        >\n            <div\n                ref={categoryRef}\n                className=\"category-container\"\n                style={{\n                    position: 'absolute',\n                    width: thisSize.x,\n                    height: thisSize.y,\n                    left: position.x + 'px',\n                    top: position.y + 'px',\n\n                    backgroundColor: thisColor,\n                }}\n            >\n                <div\n                    ref={categoryNameRef}\n                >\n                    {isRenaming ? (\n                        <input\n                            type=\"text\"\n                            value={categoryName}\n                            onChange={handleRenameChange}\n                            onBlur={handleRenameBlur}\n                            onKeyDown={handleRenameKeyDown}\n                            autoFocus\n                            className=\"category-title\"\n                            style={{\n                                border: '0',\n                                backgroundColor: 'transparent',\n                                width: dropZoneSize.x,\n                            }}\n                        />\n                    ) : (\n                            <div\n                                className=\"row-content category-title\"\n                            >\n                                <div>\n                                    {categoryName}\n                                </div>\n                                <img\n                                    src={editLineIcon}\n                                    alt=\"Renommer\"\n                                    className=\"rename-icon\"\n                                    onClick={handleRenameClick}\n                                />\n                            </div>\n                        )}\n                </div>\n                <div\n                    style={{\n                        display: 'flex',\n                        flexDirection: 'column',\n                        justifyContent: 'center',\n                        alignItems: 'center',\n                    }}\n                >\n                    {categoryCardList.map((card, index) => (\n                        <div\n                            className=\"card-container card-categorized-container\"\n                            key={index}\n                        >\n                            <div\n                                className=\"card card-txt card-categorized\"\n                                onClick={() => handleCategoryCardClick(categoryIndex, index)}\n                            >\n                                {card.text}\n                            </div>\n                        </div>\n                    ))}\n                </div>\n                <Droppable\n                    cardMoving={cardMoving}\n                    mousePosition={mousePosition}\n                    onCardEnter={handleCardEnter}\n                    onCardLeave={handleCardLeave}\n                >\n\n                        <div\n                            ref={dropZoneRef}\n                            className=\"drop-zone-default\"\n                            style={{\n                                width: dropZoneSize.x,\n                                height: dropZoneSize.y,\n                                backgroundColor: !isDropZoneActive ? '#FFCA0080' : 'transparent',\n                            }}\n                        >\n                        </div>\n                </Droppable>\n            </div>\n        </Draggable>\n    );\n};\n\nexport default Category;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}