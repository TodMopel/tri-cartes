{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const Draggable=_ref=>{let{initialPosition,size,children,onDragStart,onDragEnd,onDragMove,zIndexOrder}=_ref;const[isDragging,setIsDragging]=useState(false);const[dragStartX,setDragStartX]=useState(0);const[dragStartY,setDragStartY]=useState(0);const[currentOffset,setCurrentOffset]=useState({x:0,y:0});const targetRef=useRef(null);const borderSize=30;useEffect(()=>{const handleMove=(clientX,clientY)=>{if(isDragging){const deltaX=clientX-dragStartX+currentOffset.x;const deltaY=clientY-dragStartY+currentOffset.y;const clampedX=Math.min(Math.max(deltaX,-initialPosition.x+borderSize),window.innerWidth-size.x-initialPosition.x-borderSize);const clampedY=Math.min(Math.max(deltaY,-initialPosition.y+borderSize),window.innerHeight-size.y-initialPosition.y-borderSize);const transformValue=\"translate3d(\".concat(clampedX,\"px, \").concat(clampedY,\"px, 0)\");targetRef.current.style.transform=transformValue;if(onDragMove)onDragMove();}};const handleTouchMove=e=>{const touch=e.touches[0];handleMove(touch.clientX,touch.clientY);};const handleMouseMove=e=>{handleMove(e.clientX,e.clientY);};const handleMouseUp=()=>{setIsDragging(false);if(onDragEnd)onDragEnd();};if(isDragging){window.addEventListener('touchmove',handleTouchMove,{passive:false});window.addEventListener('mousemove',handleMouseMove);window.addEventListener('touchend',handleMouseUp);window.addEventListener('mouseup',handleMouseUp);}return()=>{window.removeEventListener('touchmove',handleTouchMove);window.removeEventListener('mousemove',handleMouseMove);window.removeEventListener('touchend',handleMouseUp);window.removeEventListener('mouseup',handleMouseUp);};},[isDragging]);const handleTouchStart=e=>{const touch=e.touches[0];setIsDragging(true);setDragStartX(touch.clientX);setDragStartY(touch.clientY);targetRef.current=e.currentTarget;const currentTransform=targetRef.current.style.transform;const translateValues=currentTransform.match(/translate3d\\(([^)]+)\\)/);if(translateValues){const transformArray=translateValues[1].split(/[\\s,]+/);const translateX=parseFloat(transformArray[0]);const translateY=parseFloat(transformArray[1]);if(!isNaN(translateX)&&!isNaN(translateY)){setCurrentOffset({x:translateX,y:translateY});}}if(onDragStart)onDragStart();};return/*#__PURE__*/_jsx(\"div\",{onMouseDown:handleTouchStart,onTouchStart:handleTouchStart,style:{cursor:isDragging?'grabbing':'grab',position:'absolute',zIndex:zIndexOrder},children:children});};export default Draggable;","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","Draggable","_ref","initialPosition","size","children","onDragStart","onDragEnd","onDragMove","zIndexOrder","isDragging","setIsDragging","dragStartX","setDragStartX","dragStartY","setDragStartY","currentOffset","setCurrentOffset","x","y","targetRef","borderSize","handleMove","clientX","clientY","deltaX","deltaY","clampedX","Math","min","max","window","innerWidth","clampedY","innerHeight","transformValue","concat","current","style","transform","handleTouchMove","e","touch","touches","handleMouseMove","handleMouseUp","addEventListener","passive","removeEventListener","handleTouchStart","currentTarget","currentTransform","translateValues","match","transformArray","split","translateX","parseFloat","translateY","isNaN","onMouseDown","onTouchStart","cursor","position","zIndex"],"sources":["/Users/todmopel/TheHangar/test deploy/tri-cartes/src/components/Draggable.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\n\nconst Draggable = ({ initialPosition, size, children, onDragStart, onDragEnd, onDragMove, zIndexOrder }) => {\n    const [isDragging, setIsDragging] = useState(false);\n    const [dragStartX, setDragStartX] = useState(0);\n    const [dragStartY, setDragStartY] = useState(0);\n    const [currentOffset, setCurrentOffset] = useState({ x: 0, y: 0 });\n\n    const targetRef = useRef(null);\n\n    const borderSize = 30;\n\n    useEffect(() => {\n        const handleMove = (clientX, clientY) => {\n            if (isDragging) {\n                const deltaX = clientX - dragStartX + currentOffset.x;\n                const deltaY = clientY - dragStartY + currentOffset.y;\n\n                const clampedX = Math.min(\n                    Math.max(deltaX, -initialPosition.x + borderSize),\n                    window.innerWidth - size.x - initialPosition.x - borderSize\n                );\n                const clampedY = Math.min(\n                    Math.max(deltaY, -initialPosition.y + borderSize),\n                    window.innerHeight - size.y - initialPosition.y - borderSize\n                );\n\n                const transformValue = `translate3d(${clampedX}px, ${clampedY}px, 0)`;\n                targetRef.current.style.transform = transformValue;\n\n                if (onDragMove) onDragMove();\n            }\n        };\n\n        const handleTouchMove = (e) => {\n            const touch = e.touches[0];\n            handleMove(touch.clientX, touch.clientY);\n        };\n\n        const handleMouseMove = (e) => {\n            handleMove(e.clientX, e.clientY);\n        };\n\n        const handleMouseUp = () => {\n            setIsDragging(false);\n\n            if (onDragEnd) onDragEnd();\n        };\n\n\n        if (isDragging) {\n            window.addEventListener('touchmove', handleTouchMove, { passive: false });\n            window.addEventListener('mousemove', handleMouseMove);\n            window.addEventListener('touchend', handleMouseUp);\n            window.addEventListener('mouseup', handleMouseUp);\n        }\n\n        return () => {\n            window.removeEventListener('touchmove', handleTouchMove);\n            window.removeEventListener('mousemove', handleMouseMove);\n            window.removeEventListener('touchend', handleMouseUp);\n            window.removeEventListener('mouseup', handleMouseUp);\n        };\n    }, [isDragging]);\n\n    const handleTouchStart = (e) => {\n        const touch = e.touches[0];\n        setIsDragging(true);\n        setDragStartX(touch.clientX);\n        setDragStartY(touch.clientY);\n        targetRef.current = e.currentTarget;\n\n        const currentTransform = targetRef.current.style.transform;\n        const translateValues = currentTransform.match(/translate3d\\(([^)]+)\\)/);\n\n        if (translateValues) {\n            const transformArray = translateValues[1].split(/[\\s,]+/);\n            const translateX = parseFloat(transformArray[0]);\n            const translateY = parseFloat(transformArray[1]);\n\n            if (!isNaN(translateX) && !isNaN(translateY)) {\n                setCurrentOffset({\n                    x: translateX,\n                    y: translateY,\n                });\n            }\n        }\n\n        if (onDragStart) onDragStart();\n    };\n\n    return (\n        <div\n            onMouseDown={handleTouchStart}\n            onTouchStart={handleTouchStart}\n            style={{\n                cursor: isDragging ? 'grabbing' : 'grab',\n                position: 'absolute',\n                zIndex: zIndexOrder,\n            }}\n        >\n            {children}\n        </div>\n    );\n};\n\nexport default Draggable;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}