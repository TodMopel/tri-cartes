{"ast":null,"code":"import React,{useRef,useState,useEffect}from'react';import Draggable from'./Draggable';import Droppable from'./Droppable';import editLineIcon from'./../images/edit_line.png';import config from'./../data/config';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Category=_ref=>{let{categoryIndex,position,text,onDragStart,cardMoving,mousePosition,onCardDropInsideDropZone,categoryCardList,onCardRestored,zIndexOrder}=_ref;const categoryRef=useRef();const[thisSize,setThisSize]=useState({x:130,y:150});const[thisColor,setThisColor]=useState();const dropZoneRef=useRef();const dropZoneSize=config.card.size;const categoryNameRef=useRef();const[categoryNameHeight,setCategoryNameHeight]=useState(18);const[isDropZoneActive,setIsDropZoneActive]=useState(false);const[isRenaming,setIsRenaming]=useState(false);const[categoryName,setCategoryName]=useState(text);const handleCardEnter=()=>{setIsDropZoneActive(true);};const handleCardLeave=()=>{setIsDropZoneActive(false);};useEffect(()=>{setThisColor(getRandomColor());},[]);useEffect(()=>{if(isDropZoneActive){onCardDropInsideDropZone(text);setIsDropZoneActive(false);}},[cardMoving]);useEffect(()=>{setThisSize(prevSize=>({...prevSize,y:100+categoryCardList.length*30+categoryNameHeight}));},[categoryCardList]);const handleRenameClick=()=>{setIsRenaming(true);};const handleRenameChange=e=>{setCategoryName(e.target.value);};const handleRenameBlur=()=>{setCategoryName(prevName=>categoryName);setIsRenaming(false);setTimeout(()=>{const inputHeight=categoryNameRef.current.getBoundingClientRect().height;setCategoryNameHeight(inputHeight);setThisSize(prevSize=>({...prevSize,y:100+categoryCardList.length*30+inputHeight}));},0);};const handleRenameKeyDown=e=>{if(e.key==='Enter'){handleRenameBlur();}};const handleCategoryCardClick=(categoryIndex,index)=>{const rect=categoryRef.current.getBoundingClientRect();const position={x:rect.left+rect.width/2,y:rect.top};onCardRestored(position,categoryIndex,index);setThisSize(prevSize=>({...prevSize,y:100+categoryCardList.length*30+categoryNameHeight}));};const getRandomColor=()=>{const randomIndex=Math.floor(Math.random()*config.category.categoryColors.length);return config.category.categoryColors[randomIndex];};return/*#__PURE__*/_jsx(Draggable,{initialPosition:position,size:thisSize,onDragStart:onDragStart,zIndexOrder:zIndexOrder,children:/*#__PURE__*/_jsxs(\"div\",{ref:categoryRef,className:\"category-container\",style:{position:'absolute',width:thisSize.x,height:thisSize.y,left:position.x+'px',top:position.y+'px',backgroundColor:thisColor},children:[/*#__PURE__*/_jsx(\"div\",{ref:categoryNameRef,children:isRenaming?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:categoryName,onChange:handleRenameChange,onBlur:handleRenameBlur,onKeyDown:handleRenameKeyDown,autoFocus:true,className:\"category-title\",style:{border:'0',backgroundColor:'transparent',width:dropZoneSize.x}}):/*#__PURE__*/_jsxs(\"div\",{className:\"row-content category-title\",children:[/*#__PURE__*/_jsx(\"div\",{children:categoryName}),/*#__PURE__*/_jsx(\"img\",{src:editLineIcon,alt:\"Renommer\",className:\"rename-icon\",onClick:handleRenameClick})]})}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',justifyContent:'center',alignItems:'center'},children:categoryCardList.map((card,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"card-container card-categorized-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card card-categorized\",onClick:()=>handleCategoryCardClick(categoryIndex,index),children:card.text})},index))}),/*#__PURE__*/_jsx(Droppable,{cardMoving:cardMoving,mousePosition:mousePosition,onCardEnter:handleCardEnter,onCardLeave:handleCardLeave,children:/*#__PURE__*/_jsx(\"div\",{ref:dropZoneRef,className:\"drop-zone-default\",style:{width:dropZoneSize.x,height:dropZoneSize.y,backgroundColor:!isDropZoneActive?'#FFCA0080':'transparent'}})})]})});};export default Category;","map":{"version":3,"names":["React","useRef","useState","useEffect","Draggable","Droppable","editLineIcon","config","jsx","_jsx","jsxs","_jsxs","Category","_ref","categoryIndex","position","text","onDragStart","cardMoving","mousePosition","onCardDropInsideDropZone","categoryCardList","onCardRestored","zIndexOrder","categoryRef","thisSize","setThisSize","x","y","thisColor","setThisColor","dropZoneRef","dropZoneSize","card","size","categoryNameRef","categoryNameHeight","setCategoryNameHeight","isDropZoneActive","setIsDropZoneActive","isRenaming","setIsRenaming","categoryName","setCategoryName","handleCardEnter","handleCardLeave","getRandomColor","prevSize","length","handleRenameClick","handleRenameChange","e","target","value","handleRenameBlur","prevName","setTimeout","inputHeight","current","getBoundingClientRect","height","handleRenameKeyDown","key","handleCategoryCardClick","index","rect","left","width","top","randomIndex","Math","floor","random","category","categoryColors","initialPosition","children","ref","className","style","backgroundColor","type","onChange","onBlur","onKeyDown","autoFocus","border","src","alt","onClick","display","flexDirection","justifyContent","alignItems","map","onCardEnter","onCardLeave"],"sources":["/Users/todmopel/TheHangar/test deploy/tri-cartes/src/components/Category.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport Draggable from './Draggable';\nimport Droppable from './Droppable';\n\nimport editLineIcon from './../images/edit_line.png';\nimport config from './../data/config';\n\nconst Category = ({ categoryIndex, position, text, onDragStart, cardMoving, mousePosition, onCardDropInsideDropZone, categoryCardList, onCardRestored, zIndexOrder }) => {\n    const categoryRef = useRef();\n    const [thisSize, setThisSize] = useState({ x: 130, y: 150 });\n    const [thisColor, setThisColor] = useState();\n    const dropZoneRef = useRef();\n    const dropZoneSize = config.card.size;\n\n    const categoryNameRef = useRef();\n    const [categoryNameHeight, setCategoryNameHeight] = useState(18);\n\n    const [isDropZoneActive, setIsDropZoneActive] = useState(false);\n    const [isRenaming, setIsRenaming] = useState(false);\n    const [categoryName, setCategoryName] = useState(text);\n\n    const handleCardEnter = () => {\n        setIsDropZoneActive(true);\n    };\n\n    const handleCardLeave = () => {\n        setIsDropZoneActive(false);\n    };\n    useEffect(() => {\n        setThisColor(getRandomColor());\n    }, []);\n\n    useEffect(() => {\n        if (isDropZoneActive) {\n            onCardDropInsideDropZone(text);\n            setIsDropZoneActive(false);\n        }\n    }, [cardMoving]);\n\n    useEffect(() => {\n        setThisSize((prevSize) => ({ ...prevSize, y: 100 + categoryCardList.length * 30 + categoryNameHeight }));\n    }, [categoryCardList]);\n\n    const handleRenameClick = () => {\n        setIsRenaming(true);\n    };\n\n    const handleRenameChange = (e) => {\n        setCategoryName(e.target.value);\n    };\n\n    const handleRenameBlur = () => {\n        setCategoryName((prevName) => categoryName);\n        setIsRenaming(false);\n\n        setTimeout(() => {\n            const inputHeight = categoryNameRef.current.getBoundingClientRect().height;\n            setCategoryNameHeight(inputHeight);\n            setThisSize((prevSize) => ({ ...prevSize, y: 100 + categoryCardList.length * 30 + inputHeight }));\n        }, 0);\n    };\n\n    const handleRenameKeyDown = (e) => {\n        if (e.key === 'Enter') {\n            handleRenameBlur();\n        }\n    };\n\n    const handleCategoryCardClick = (categoryIndex, index) => {\n        const rect = categoryRef.current.getBoundingClientRect();\n        const position = {\n            x: rect.left + rect.width / 2,\n            y: rect.top,\n        };\n\n        onCardRestored(position, categoryIndex, index);\n        setThisSize((prevSize) => ({ ...prevSize, y: 100 + categoryCardList.length * 30 + categoryNameHeight }));\n    }\n\n    const getRandomColor = () => {\n        const randomIndex = Math.floor(Math.random() * config.category.categoryColors.length);\n        return config.category.categoryColors[randomIndex];\n    };\n\n\n    return (\n        <Draggable\n            initialPosition={position}\n            size={thisSize}\n            onDragStart={onDragStart}\n            zIndexOrder={zIndexOrder}\n        >\n            <div\n                ref={categoryRef}\n                className=\"category-container\"\n                style={{\n                    position: 'absolute',\n                    width: thisSize.x,\n                    height: thisSize.y,\n                    left: position.x + 'px',\n                    top: position.y + 'px',\n\n                    backgroundColor: thisColor,\n                }}\n            >\n                <div\n                    ref={categoryNameRef}\n                >\n                    {isRenaming ? (\n                        <input\n                            type=\"text\"\n                            value={categoryName}\n                            onChange={handleRenameChange}\n                            onBlur={handleRenameBlur}\n                            onKeyDown={handleRenameKeyDown}\n                            autoFocus\n                            className=\"category-title\"\n                            style={{\n                                border: '0',\n                                backgroundColor: 'transparent',\n                                width: dropZoneSize.x,\n                            }}\n                        />\n                    ) : (\n                            <div\n                                className=\"row-content category-title\"\n                            >\n                                <div>\n                                    {categoryName}\n                                </div>\n                                <img\n                                    src={editLineIcon}\n                                    alt=\"Renommer\"\n                                    className=\"rename-icon\"\n                                    onClick={handleRenameClick}\n                                />\n                            </div>\n                        )}\n                </div>\n                <div\n                    style={{\n                        display: 'flex',\n                        flexDirection: 'column',\n                        justifyContent: 'center',\n                        alignItems: 'center',\n                    }}\n                >\n                    {categoryCardList.map((card, index) => (\n                        <div\n                            className=\"card-container card-categorized-container\"\n                            key={index}\n                        >\n                            <div\n                                className=\"card card-categorized\"\n                                onClick={() => handleCategoryCardClick(categoryIndex, index)}\n                            >\n                                {card.text}\n                            </div>\n                        </div>\n                    ))}\n                </div>\n                <Droppable\n                    cardMoving={cardMoving}\n                    mousePosition={mousePosition}\n                    onCardEnter={handleCardEnter}\n                    onCardLeave={handleCardLeave}\n                >\n\n                        <div\n                            ref={dropZoneRef}\n                            className=\"drop-zone-default\"\n                            style={{\n                                width: dropZoneSize.x,\n                                height: dropZoneSize.y,\n                                backgroundColor: !isDropZoneActive ? '#FFCA0080' : 'transparent',\n                            }}\n                        >\n                        </div>\n                </Droppable>\n            </div>\n        </Draggable>\n    );\n};\n\nexport default Category;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}