{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import config from'./../data/config';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const CategoryNode=_ref=>{let{categoryName,jobs,onDeleteJob}=_ref;return/*#__PURE__*/_jsxs(\"li\",{className:\"category-node center-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"category-name\",children:categoryName}),/*#__PURE__*/_jsx(\"ul\",{className:\"jobs-list\",children:jobs.map((job,index)=>job.isActive&&/*#__PURE__*/_jsx(JobNode,{job:job,onDelete:()=>onDeleteJob(categoryName,job)},index))})]});};const JobNode=_ref2=>{let{job,onDelete}=_ref2;const[selected,setSelected]=useState(false);const onSelect=()=>{setSelected(!selected);};return/*#__PURE__*/_jsxs(\"li\",{className:\"job-node row-content\",children:[/*#__PURE__*/_jsx(\"span\",{onClick:onSelect,className:\"job-text \".concat(selected?'job-text-selected':''),children:job.text}),/*#__PURE__*/_jsx(\"span\",{className:\"delete-button button-small\",onClick:onDelete,children:config.result.deleteJobButton})]});};const ResultPage=_ref3=>{let{resultData}=_ref3;const[resultTable,setResultTable]=useState([]);useEffect(()=>{setResultTable(resultData);},[resultData]);const handleDeleteJob=(categoryName,job)=>{const updatedResultTable=resultTable.map(category=>{if(category.categoryName===categoryName){return{...category,jobs:category.jobs.map(j=>j.text===job.text?{...j,isActive:false}:j)};}return category;});setResultTable(updatedResultTable);};const activeCategories=resultTable.filter(category=>category.jobs.some(job=>job.isActive));return/*#__PURE__*/_jsx(\"div\",{className:\"background-grid result-page center-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"center-content-spread\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:config.result.title}),/*#__PURE__*/_jsx(\"h3\",{children:config.result.subTitle})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"result-list\",children:activeCategories&&activeCategories.map((category,index)=>/*#__PURE__*/_jsx(CategoryNode,{categoryName:category.categoryName,jobs:category.jobs,onDeleteJob:handleDeleteJob},index))}),/*#__PURE__*/_jsx(\"div\",{className:\"ui-card ui-button-container\",children:/*#__PURE__*/_jsx(Link,{to:\"/tri-cartes/\",className:\"button button-normal\",children:\"Retourner \\xE0 l'accueil\"})})]})});};export default ResultPage;","map":{"version":3,"names":["React","useState","useEffect","Link","config","jsx","_jsx","jsxs","_jsxs","CategoryNode","_ref","categoryName","jobs","onDeleteJob","className","children","map","job","index","isActive","JobNode","onDelete","_ref2","selected","setSelected","onSelect","onClick","concat","text","result","deleteJobButton","ResultPage","_ref3","resultData","resultTable","setResultTable","handleDeleteJob","updatedResultTable","category","j","activeCategories","filter","some","title","subTitle","to"],"sources":["/Users/todmopel/TheHangar/test deploy/tri-cartes/src/pages/ResultPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport config from './../data/config';\n\nconst CategoryNode = ({ categoryName, jobs, onDeleteJob }) => {\n    return (\n        <li className=\"category-node center-content\">\n            <div className=\"category-name\">{categoryName}</div>\n            <ul className=\"jobs-list\">\n                {jobs.map((job, index) => (\n                    job.isActive && (\n                        <JobNode key={index} job={job} onDelete={() => onDeleteJob(categoryName, job)} />)\n                ))}\n            </ul>\n        </li>\n    );\n};\n\nconst JobNode = ({ job, onDelete }) => {\n    const [selected, setSelected] = useState(false);\n\n    const onSelect = () => {\n        setSelected(!selected);\n    };\n\n    return (\n        <li className=\"job-node row-content\">\n            <span onClick={onSelect} className={`job-text ${selected ? 'job-text-selected' : ''}`}>{job.text}</span>\n            <span className=\"delete-button button-small\" onClick={onDelete}>{config.result.deleteJobButton}</span>\n        </li>\n    );\n};\n\nconst ResultPage = ({ resultData }) => {\n    const [resultTable, setResultTable] = useState([]);\n\n    useEffect(() => {\n        setResultTable(resultData);\n    }, [resultData]);\n\n    const handleDeleteJob = (categoryName, job) => {\n        const updatedResultTable = resultTable.map((category) => {\n            if (category.categoryName === categoryName) {\n                return {\n                    ...category,\n                    jobs: category.jobs.map((j) => (j.text === job.text ? { ...j, isActive: false } : j)),\n                };\n            }\n            return category;\n        });\n\n        setResultTable(updatedResultTable);\n    };\n\n    const activeCategories = resultTable.filter((category) => category.jobs.some((job) => job.isActive));\n\n    return (\n        <div className=\"background-grid result-page center-content\">\n            <div className=\"center-content-spread\">\n                <div>\n                    <h1>{config.result.title}</h1>\n                    <h3>{config.result.subTitle}</h3>\n                </div>\n                <ul className=\"result-list\">\n                    {activeCategories &&\n                        activeCategories.map((category, index) => (\n                            <CategoryNode\n                                key={index}\n                                categoryName={category.categoryName}\n                                jobs={category.jobs}\n                                onDeleteJob={handleDeleteJob}\n                            />\n                        ))}\n                </ul>\n                <div className=\"ui-card ui-button-container\">\n                    <Link to=\"/tri-cartes/\" className=\"button button-normal\">\n                        Retourner Ã  l'accueil\n                    </Link>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default ResultPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}